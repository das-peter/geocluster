<?php

/**
 * Implements hook_views_api().
 */
function geocluster_solr_views_api() {
  return array(
    'api' => 3.0,
  );
}

/**
 * Implements hook_search_api_data_type_info().
 */
function geocluster_solr_search_api_data_type_info() {
  return array(
    'geohash' => array(
      'name' => t('geohash'),
      'fallback' => 'string',
    ),
  );
}

/**
 * Implements hook_search_api_service_info().
 */
function geocluster_solr_search_api_service_info() {
  $services['geocluster_solr_service'] = array(
    'name' => t('Geocluster Solr service'),
    'description' => t('<p>Geocluster-specific index based on the standard Search API Solr server.</p>'),
    'class' => 'GeoclusterSearchApiSolrService',
  );
  return $services;
}

/**
 * Implements hook_search_api_item_type_info_alter().
 */
function geocluster_solr_search_api_item_type_info_alter(array &$infos) {
  if (isset($infos['geocluster_item'])) {
    $infos['geocluster_item']['datasource controller'] = 'GeoclusterSearchApiEntityDataSourceController';
  }
}
